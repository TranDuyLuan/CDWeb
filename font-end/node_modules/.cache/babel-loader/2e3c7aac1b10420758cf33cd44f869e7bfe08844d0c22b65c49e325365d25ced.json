{"ast":null,"code":"var _jsxFileName = \"D:\\\\Project\\\\CDWeb\\\\font-end\\\\src\\\\component\\\\pages\\\\CategoryProductsPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport ApiService from \"../../service/ApiService\";\nimport ProductList from \"../common/ProductList\";\nimport Pagination from \"../common/Pagination\";\nimport \"../../style/home.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CategoryProductsPage = () => {\n  _s();\n  const {\n    categoryId\n  } = useParams();\n  const [products, setProducts] = useState([]);\n  const [categoryName, setCategoryName] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const itemsPerPage = 8;\n  useEffect(() => {\n    setCurrentPage(1); // reset page khi chuyển danh mục\n  }, [categoryId]);\n  useEffect(() => {\n    fetchProducts();\n  }, [categoryId, currentPage]);\n  const fetchProducts = async () => {\n    setLoading(true);\n    try {\n      const response = await ApiService.getAllProductsByCategoryId(categoryId);\n      const allProducts = response.productList || [];\n      setCategoryName(response.categoryName || \"Sản phẩm\");\n      setTotalPages(Math.ceil(allProducts.length / itemsPerPage));\n      setProducts(allProducts.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage));\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || \"Không thể lấy sản phẩm theo danh mục\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u0110ang t\\u1EA3i s\\u1EA3n ph\\u1EA9m...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this) : products.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Kh\\xF4ng c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o trong danh m\\u1EE5c n\\xE0y.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"category-title\",\n        children: [\"Danh m\\u1EE5c: \", categoryName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ProductList, {\n        products: products\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n        currentPage: currentPage,\n        totalPages: totalPages,\n        onPageChange: page => setCurrentPage(page)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(CategoryProductsPage, \"QvDxs+4B8PuqvHzYQgpDysOzAyE=\", false, function () {\n  return [useParams];\n});\n_c = CategoryProductsPage;\nexport default CategoryProductsPage;\nvar _c;\n$RefreshReg$(_c, \"CategoryProductsPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","ApiService","ProductList","Pagination","jsxDEV","_jsxDEV","Fragment","_Fragment","CategoryProductsPage","_s","categoryId","products","setProducts","categoryName","setCategoryName","currentPage","setCurrentPage","totalPages","setTotalPages","loading","setLoading","error","setError","itemsPerPage","fetchProducts","response","getAllProductsByCategoryId","allProducts","productList","Math","ceil","length","slice","_error$response","_error$response$data","data","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onPageChange","page","_c","$RefreshReg$"],"sources":["D:/Project/CDWeb/font-end/src/component/pages/CategoryProductsPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport ApiService from \"../../service/ApiService\";\r\nimport ProductList from \"../common/ProductList\";\r\nimport Pagination from \"../common/Pagination\";\r\nimport \"../../style/home.css\";\r\n\r\nconst CategoryProductsPage = () => {\r\n  const { categoryId } = useParams();\r\n  const [products, setProducts] = useState([]);\r\n  const [categoryName, setCategoryName] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const itemsPerPage = 8;\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1); // reset page khi chuyển danh mục\r\n  }, [categoryId]);\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, [categoryId, currentPage]);\r\n\r\n  const fetchProducts = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await ApiService.getAllProductsByCategoryId(categoryId);\r\n      const allProducts = response.productList || [];\r\n      setCategoryName(response.categoryName || \"Sản phẩm\");\r\n      setTotalPages(Math.ceil(allProducts.length / itemsPerPage));\r\n      setProducts(\r\n        allProducts.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage)\r\n      );\r\n    } catch (error) {\r\n      setError(\r\n        error.response?.data?.message ||\r\n          error.message ||\r\n          \"Không thể lấy sản phẩm theo danh mục\"\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      {loading ? (\r\n        <p>Đang tải sản phẩm...</p>\r\n      ) : error ? (\r\n        <p className=\"error-message\">{error}</p>\r\n      ) : products.length === 0 ? (\r\n        <p>Không có sản phẩm nào trong danh mục này.</p>\r\n      ) : (\r\n        <>\r\n          <h2 className=\"category-title\">Danh mục: {categoryName}</h2>\r\n          <ProductList products={products} />\r\n          <Pagination\r\n            currentPage={currentPage}\r\n            totalPages={totalPages}\r\n            onPageChange={(page) => setCurrentPage(page)}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryProductsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}