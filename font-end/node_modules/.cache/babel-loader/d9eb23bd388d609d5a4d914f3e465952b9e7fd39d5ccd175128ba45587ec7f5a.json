{"ast":null,"code":"var _jsxFileName = \"D:\\\\Project\\\\CDWeb\\\\font-end\\\\src\\\\component\\\\pages\\\\Home.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport ProductList from \"../common/ProductList\";\nimport Pagination from \"../common/Pagination\";\nimport ApiService from \"../../service/ApiService\";\nimport '../../style/home.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const location = useLocation();\n  const [products, setProducts] = useState([]);\n  const [newestProducts, setNewestProducts] = useState([]);\n  const [bestSellingProducts, setBestSellingProducts] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const itemsPerPage = 10;\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      try {\n        const queryparams = new URLSearchParams(location.search);\n        const searchItem = queryparams.get(\"search\");\n        let allProducts = [];\n        if (searchItem) {\n          const response = await ApiService.searchProducts(searchItem);\n          allProducts = response.productList || [];\n        } else {\n          const response = await ApiService.getAllProducts();\n          allProducts = response.productList || [];\n        }\n\n        // Tách sản phẩm mới nhất\n        const sortedByDate = [...allProducts].sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n        setNewestProducts(sortedByDate.slice(0, 8));\n\n        // Tách sản phẩm bán chạy\n        const sortedBySold = [...allProducts].sort((a, b) => b.sold - a.sold);\n        setBestSellingProducts(sortedBySold.slice(0, 8));\n\n        // Phân trang cho tất cả sản phẩm\n        setTotalPages(Math.ceil(allProducts.length / itemsPerPage));\n        setProducts(allProducts.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage));\n        setError(null);\n      } catch (error) {\n        var _error$response, _error$response$data;\n        setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || \"Unable to fetch products\");\n      }\n      setLoading(false);\n    };\n    fetchData();\n  }, [location.search, currentPage]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home-banner\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/banner.png\",\n        alt: \"101 Mart Banner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }, this), error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this) : loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loading-message\",\n      children: \"Loading products...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [currentPage === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Newest Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ProductList, {\n          products: newestProducts\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Best Sellers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ProductList, {\n          products: bestSellingProducts\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: location.search.includes(\"search=\") ? \"Search Results\" : \"All Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProductList, {\n        products: products\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n        currentPage: currentPage,\n        totalPages: totalPages,\n        onPageChange: page => setCurrentPage(page)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 3\n  }, this);\n};\n_s(Home, \"YADuN8q4JPvGDnR5qa5EGSuymT8=\", false, function () {\n  return [useLocation];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","ProductList","Pagination","ApiService","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s","location","products","setProducts","newestProducts","setNewestProducts","bestSellingProducts","setBestSellingProducts","currentPage","setCurrentPage","totalPages","setTotalPages","error","setError","loading","setLoading","itemsPerPage","fetchData","queryparams","URLSearchParams","search","searchItem","get","allProducts","response","searchProducts","productList","getAllProducts","sortedByDate","sort","a","b","Date","createdAt","slice","sortedBySold","sold","Math","ceil","length","_error$response","_error$response$data","data","message","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","includes","onPageChange","page","_c","$RefreshReg$"],"sources":["D:/Project/CDWeb/font-end/src/component/pages/Home.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport ProductList from \"../common/ProductList\";\r\nimport Pagination from \"../common/Pagination\";\r\nimport ApiService from \"../../service/ApiService\";\r\nimport '../../style/home.css';\r\n\r\nconst Home = () => {\r\n    const location = useLocation();\r\n    const [products, setProducts] = useState([]);\r\n    const [newestProducts, setNewestProducts] = useState([]);\r\n    const [bestSellingProducts, setBestSellingProducts] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const [error, setError] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const itemsPerPage = 10;\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const queryparams = new URLSearchParams(location.search);\r\n                const searchItem = queryparams.get(\"search\");\r\n\r\n                let allProducts = [];\r\n                if (searchItem) {\r\n                    const response = await ApiService.searchProducts(searchItem);\r\n                    allProducts = response.productList || [];\r\n                } else {\r\n                    const response = await ApiService.getAllProducts();\r\n                    allProducts = response.productList || [];\r\n                }\r\n\r\n                // Tách sản phẩm mới nhất\r\n                const sortedByDate = [...allProducts].sort(\r\n                    (a, b) => new Date(b.createdAt) - new Date(a.createdAt)\r\n                );\r\n                setNewestProducts(sortedByDate.slice(0, 8));\r\n\r\n                // Tách sản phẩm bán chạy\r\n                const sortedBySold = [...allProducts].sort((a, b) => b.sold - a.sold);\r\n                setBestSellingProducts(sortedBySold.slice(0, 8));\r\n\r\n                // Phân trang cho tất cả sản phẩm\r\n                setTotalPages(Math.ceil(allProducts.length / itemsPerPage));\r\n                setProducts(\r\n                    allProducts.slice(\r\n                        (currentPage - 1) * itemsPerPage,\r\n                        currentPage * itemsPerPage\r\n                    )\r\n                );\r\n\r\n                setError(null);\r\n            } catch (error) {\r\n                setError(\r\n                    error.response?.data?.message ||\r\n                    error.message ||\r\n                    \"Unable to fetch products\"\r\n                );\r\n            }\r\n            setLoading(false);\r\n        };\r\n\r\n        fetchData();\r\n    }, [location.search, currentPage]);\r\n\r\n    return (\r\n  <div className=\"home\">\r\n    <div className=\"home-banner\">\r\n      <img src=\"/banner.png\" alt=\"101 Mart Banner\" />\r\n    </div>\r\n\r\n    {error ? (\r\n      <p className=\"error-message\">{error}</p>\r\n    ) : loading ? (\r\n      <p className=\"loading-message\">Loading products...</p>\r\n    ) : (\r\n      <>\r\n        {currentPage === 1 && (\r\n          <>\r\n            <h2 className=\"section-title\">Newest Products</h2>\r\n            <ProductList products={newestProducts} />\r\n\r\n            <h2 className=\"section-title\">Best Sellers</h2>\r\n            <ProductList products={bestSellingProducts} />\r\n          </>\r\n        )}\r\n\r\n        <h2 className=\"section-title\">\r\n          {location.search.includes(\"search=\")\r\n            ? \"Search Results\"\r\n            : \"All Products\"}\r\n        </h2>\r\n        <ProductList products={products} />\r\n        <Pagination\r\n          currentPage={currentPage}\r\n          totalPages={totalPages}\r\n          onPageChange={(page) => setCurrentPage(page)}\r\n        />\r\n      </>\r\n    )}\r\n  </div>\r\n);\r\n\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}